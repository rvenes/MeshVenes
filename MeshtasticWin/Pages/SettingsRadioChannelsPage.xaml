<Page
    x:Class="MeshtasticWin.Pages.SettingsRadioChannelsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid RowDefinitions="Auto,8,Auto,8,*">
        <TextBlock Text="Channels" FontSize="22" FontWeight="SemiBold"/>
        <TextBlock Grid.Row="2" x:Name="StatusText" Opacity="0.85" Text="Loading..."/>

        <StackPanel Grid.Row="4" Spacing="8">
            <StackPanel Orientation="Horizontal" Spacing="8">
                <Button Content="Reload" Click="Reload_Click"/>
                <Button Content="Save all" Click="Save_Click"/>
            </StackPanel>

            <ListView x:Name="ChannelsList" ItemsSource="{x:Bind Rows, Mode=OneWay}">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <Border BorderThickness="1" CornerRadius="8" Padding="10" Margin="0,0,0,8" BorderBrush="#33FFFFFF">
                            <Grid ColumnDefinitions="100,110,170,*,90,90,120" RowSpacing="6" ColumnSpacing="8">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <TextBlock Grid.Column="0" VerticalAlignment="Center" Text="Index"/>
                                <TextBlock Grid.Column="1" VerticalAlignment="Center" Text="{Binding Index}"/>

                                <TextBlock Grid.Column="2" VerticalAlignment="Center" Text="Role"/>
                                <ComboBox Grid.Column="3" Width="220" SelectedIndex="{Binding RoleIndex, Mode=TwoWay}">
                                    <ComboBoxItem Content="Disabled"/>
                                    <ComboBoxItem Content="Primary"/>
                                    <ComboBoxItem Content="Secondary"/>
                                </ComboBox>

                                <TextBlock Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" Text="Name"/>
                                <TextBox Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" Text="{Binding Name, Mode=TwoWay}"/>

                                <TextBlock Grid.Row="1" Grid.Column="4" VerticalAlignment="Center" Text="Uplink"/>
                                <CheckBox Grid.Row="1" Grid.Column="5" IsChecked="{Binding UplinkEnabled, Mode=TwoWay}" VerticalAlignment="Center"/>

                                <TextBlock Grid.Row="2" Grid.Column="0" VerticalAlignment="Center" Text="PSK (base64)"/>
                                <TextBox Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="5" Text="{Binding PskBase64, Mode=TwoWay}"/>

                                <TextBlock Grid.Row="3" Grid.Column="0" VerticalAlignment="Center" Text="Channel ID"/>
                                <TextBox Grid.Row="3" Grid.Column="1" Grid.ColumnSpan="2" Text="{Binding ChannelIdText, Mode=TwoWay}"/>

                                <TextBlock Grid.Row="3" Grid.Column="4" VerticalAlignment="Center" Text="Downlink"/>
                                <CheckBox Grid.Row="3" Grid.Column="5" IsChecked="{Binding DownlinkEnabled, Mode=TwoWay}" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </StackPanel>
    </Grid>
</Page>
